---
layout: post
title: 正则表达式
categories: regex
tags: [regex]
excerpt: 正则表达式
subtitle: 正则表达式
---

因为项目中经常用到，每次使用都要去查询，所以记录以下以便之后查找

----------
## 简介

正则表达式一种文本模式，用来匹配一种特定规则的文本,，包括普通字符和特殊字符。使用单个字符串来匹配一系列符合这个模式的字符串。



## 语法

### 普通字符
普通字符包括可打印以及不可打印字符，大小写字母，数字，标点等

|字符|描述|
|------------|-------------|
|[ABC]|匹配[...]中的所有字符，例如前面的表达式中匹配所有的A，B，C|
|[^ABC]|匹配出了A，B，C中的所有字符|
|[A-Z]|表示一个区间 ，匹配所有大写的A-Z的字符|
|.|匹配除了换行之外的任何单个字符，相当于[^]|
|[\s\S]|s匹配所有空白符 包括换行 S不包括换行|
|\w|匹配字母数字下划线|

### 非打印字符
非打印字符一般用转义字符表示。

|字符|描述|
|------------|-------------|
|\cx|匹配由x指明的控制字符例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。|
|\f|匹配一个换页符。等价于 \x0c 和 \cL。|
|\n|匹配一个换行符。等价于 \x0a 和 \cJ。|
|\r|匹配一个回车符。等价于 \x0d 和 \cM。|
|\t|匹配一个制表符。等价于 \x09 和 \cI。|
|\v|匹配一个垂直制表符。等价于 \x0b 和 \cK。|


### 特殊字符

一些在正则表达式中有特殊意义的字符，如果想要匹配这些字符需要在前面加上转义符号，如果要查找字符串中的 * 符号，则需要对 * 进行转义，即在其前加一个 \

|特殊字符|描述|
|------------|-------------|
|$|匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 '\n' 或 '\r'|
|( )|标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 \( 和 \)|
|*|匹配前面的子表达式零次或者多次|
|+|匹配前面的子表达式一次或多次。要匹配 + 字符，请使用 \+。|
|.|匹配除换行符 \n 之外的任何单字符。要匹配 . ，请使用 \. 。|
|[|标记一个中括号表达式的开始。要匹配 [，请使用 \[。|
|？|匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用 \?。|
|\ |将下一个字符标记为特殊字符，或者原本的意思|
|^|匹配开头|
|{|标记限定符表达式的开始。要匹配 {，请使用 \{。|
|||指明两项之间的一个选择。要匹配 |，请使用 \|。|

### 限定符
限定符用来表示一个组件出现多少次
|字符|描述|
|---------------|-----------|
|*|匹配前面的子表达式零次或多次。例如，zo* 能匹配 "z" 以及 "zoo"。* 等价于{0,}。|
|+|匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 "zo" 以及 "zoo"，但不能匹配 "z"。+ 等价于 {1,}。|
|?|匹配前面的子表达式零次或一次。例如，"do(es)?" 可以匹配 "do" 、 "does" 中的 "does" 、 "doxy" 中的 "do" 。? 等价于 {0,1}。|
|{n}|n是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 "Bob" 中的 'o'，但是能匹配 "food" 中的两个 o。|
|{n,}|	n 是一个非负整数。至少匹配n 次。例如，'o{2,}' 不能匹配 "Bob" 中的 'o'，但能匹配 "foooood" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。|
|{n,m}|m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。例如，"o{1,3}" 将匹配 "fooooood" 中的前三个 o。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。|



**\* 和 + 限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个 ? 就可以实现非贪婪或最小匹配。**

\b 匹配一个单词边界，即字与空格间的位置。
\B 非单词边界匹配。


### 选择

用圆括号 () 将所有选择项括起来，相邻的选择项之间用 \| 分隔。() 表示捕获分组，() 会把每个分组里的匹配的值保存起来.


### 以下列出 ?=、?<=、?!、?<! 的使用区别

exp1(?=exp2)：查找 exp2 前面的 exp1。

![图便1](/assets/images/regex/reg-111.jpg)

(?<=exp2)exp1：查找 exp2 后面的 exp1。

![图便1](/assets/images/regex/reg-222.jpg)

exp1(?!exp2)：查找后面不是 exp2 的 exp1。

![图便1](/assets/images/regex/reg-333.jpg)

(?<!exp2)exp1：查找前面不是 exp2 的 exp1。

![图便1](/assets/images/regex/reg-444.jpg)

### 反向引用

对一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式。每个缓冲区都可以使用 \n 访问，其中 n 为一个标识特定缓冲区的一位或两位十进制数。

```
var str = "Is is the cost of of gasoline going up up";
var patt1 = /\b([a-z]+) \1\b/ig;
document.write(str.match(patt1));
```

## 修饰符
修饰符不写在正则表达式里，标记位于表达式之外

|修饰符|含义|描述|
|-------|-------|-----|
|i|ignore - 不区分大小写|将匹配设置为不区分大小写，搜索时不区分大小写: A 和 a 没有区别。|
|g|	global - 全局匹配|	查找所有的匹配项。|
|m|multi line - 多行匹配|使边界字符 ^ 和 $ 匹配每一行的开头和结尾，记住是多行，而不是整个字符串的开头和结尾|
|s|	特殊字符圆点 . 中包含换行符 \n|默认情况下的圆点 . 是 匹配除换行符 \n 之外的任何字符，加上 s 修饰符之后, . 中包含换行符 \n。|

## 元字符

简单的？ * {} 不在下表中 

|字符|描述|
|------------|------------|
|(pattern)|匹配 pattern 并获取这一匹配。|
|(?:pattern)|匹配 pattern 但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用 "或" 字符 (\|) 来组合一个模式的各个部分是很有用。例如， 'industr(?:y\|ies) 就是一个比 'industry\|industries' 更简略的表达式。|
|(?=pattern)|正向肯定预查（look ahead positive assert），在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，"Windows(?=95\|98\|NT\|2000)"能匹配"Windows2000"中的"Windows"，但不能匹配"Windows3.1"中的"Windows"。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。|
|(?!pattern)|正向否定预查(negative assert)，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如"Windows(?!95\|98\|NT\|2000)"能匹配"Windows3.1"中的"Windows"，但不能匹配"Windows2000"中的"Windows"。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。|
|(?<=pattern)|反向(look behind)肯定预查，与正向肯定预查类似，只是方向相反。例如，"(?<=95\|98\|NT\|2000)Windows"能匹配"2000Windows"中的"Windows"，但不能匹配"3.1Windows"中的"Windows"。|
|(?<!pattern)|反向否定预查，与正向否定预查类似，只是方向相反。例如"(?<!95\|98\|NT\|2000)Windows"能匹配"3.1Windows"中的"Windows"，但不能匹配"2000Windows"中的"Windows"。|

## 运算符优先级

相同优先级的从左到右进行运算，不同优先级的运算先高后低。下表从最高到最低说明了各种正则表达式运算符的优先级顺序：

|符号|描述|
|----------|------------|
|\ | 转义符|
|(), (?:), (?=), []|圆括号和方括号|
|*, +, ?, {n}, {n,}, {n,m}|	限定符|
|^, $, \任何元字符、任何字符|定位点和序列（即：位置和顺序）|
|\||替换，"或"操作|